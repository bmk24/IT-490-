<!DOCTYPE html>
<html lang="en">
<head>
	<title>Welcome</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
<style>
	body {font-family: Arial;}
	
	/* Style the tab */
	.tab {
		overflow: hidden;
		border: 1px solid #ccc;
		background-color: #f1f1f1;
	}
	
	/* Style the buttons inside the tab */
	.tab button {
		background-color: inherit;
		float: left;
		border: none;
		outline: none;
		cursor: pointer;
		padding: 14px 16px;
		transition: 0.3s;
		font-size: 17px;
	}
	
	/* Change background color of buttons on hover */
	.tab button:hover {
		background-color: #ddd;
	}
	
	/* Create an active/current tablink class */
	.tab button.active {
		background-color: #ccc;
	}
	
	/* Style the tab content */
	.tabcontent {
		display: none;
		padding: 6px 12px;
		border: 1px solid #ccc;
		border-top: none;
	}
	</style>
<script>

function openCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}
function handleclick(e){
// -----------------------------------------------------------------------user login
	if(e.value=='Ulogin'){
	var uemail=document.getElementById("uemail").value;
	var upassword=document.getElementById("upassword").value;
	event.preventDefault()
	console.log(e.value,uemail,upassword)
	var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
				//console.log(this.responseText)
				if(this.response==1){
					console.log(this.response)
				window.location.href = "logged_in.html";
				}
				else{
					console.log(this.response)
					alert("Login failed! Try again");
				}
				//alert(this.responseText);
            }
        }
		//xmlhttp.open("GET", "../01_php_scripts/RabbitMQClientSample.php?type=Ulogin"+"&email="+uemail+"&password="+upassword, true);
		xmlhttp.open("GET", "../01_php_scripts/RabbitMQClientSample.php?type=Ulogin"+"&uemail="+uemail+"&upassword="+upassword, true);
        xmlhttp.send();
	}
// -----------------------------------------------------------------------user registration
	else if(e.value=='Register as User'){
	//---------------Radio Buttons
	var characters = document.getElementsByName('character');
  var char_selected;
  for(i = 0; i < characters.length; i++) {
    if(characters[i].checked==true){
      char_selected = characters[i].value;
      console.log(char_selected)
    }
  }
  // ------
  var currencies = document.getElementsByName('crncy');
  var crncy_selected;
  for(i = 0; i < currencies.length; i++) {
    if(currencies[i].checked==true){
      crncy_selected = currencies[i].value;
      console.log(crncy_selected)
    }
  }
//---------------Radio Buttons end

	var uemail=document.getElementById("uremail").value;
	var upassword=document.getElementById("urpassword").value;
	event.preventDefault()
	var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
				console.log(this.responseText)
				if(this.response==1){
				//window.location.href = "index.html";
				alert("success!....")
				}
				else{
					alert("failed! Try again");
				}	
            }
        }
		console.log(char_selected,crncy_selected)
		xmlhttp.open("GET", "../01_php_scripts/RabbitMQClientSample.php?type=uregistration"+"&uemail="+uemail+"&upassword="+upassword+"&char="+char_selected+"&cur="+crncy_selected, true);
        xmlhttp.send();
	}
}
</script>
</head>
<body>
	<div class="limiter">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href="#">GalaxyMario</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
		  <span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
		  <ul class="navbar-nav">
			<li class="nav-item">
			  <a class="nav-link" onclick="openCity(event, 'login')">User login</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" onclick="openCity(event, 'user_reg')">User Registration</a>
			</li>
		  </ul>
		</div>
	  </nav>		
<!----------- user login starts here       -->
<div id="login" class="tabcontent">
	<div class="container-login100 member">
		<div class="container-login100">
				<div class="wrap-login100">
					<div class="login100-pic js-tilt" data-tilt>
						<img src="images/img-01.png" alt="IMG">
					</div>
					<form class="login100-form validate-form">
						<span class="login100-form-title">
							User Login
						</span>
						<div class="wrap-input100">
							<input id="uemail" class="input100" type="text" name="email" placeholder="Email">
							<span class="focus-input100"></span>
							<span class="symbol-input100">
								<i class="fa fa-envelope" aria-hidden="true"></i>
							</span>
						</div>
	
						<div class="wrap-input100 validate-input" data-validate = "Password is required">
							<input id="upassword" class="input100" type="password" name="password" placeholder="Password">
							<span class="focus-input100"></span>
							<span class="symbol-input100">
								<i class="fa fa-lock" aria-hidden="true"></i>
							</span>
						</div>
						<div class="container-login100-form-btn">
							<input type="button" onclick="handleclick(this)" class="login100-form-btn" name="type" value="Ulogin">
						</input>
						</div>
					</form>
				</div>
			</div>	
</div>
</div>
<!----------- user reg starts here       -->

<div id="user_reg" class="tabcontent">
		<div class="container-login100 member">
				<div class="container-login100">
						<div class="wrap-login100">
  <div class="member">
		<form class="login100-form validate-form" action="../01_php_scripts/RabbitMQClientSample.php">
				<label for="email">Username :</label>
				<input id="uremail" type="text" name="email" class="form-control" id="email">
				<div class="form-group">
				<label for="pwd">Password:</label>
				<input id="urpassword" type="text" name="password" class="form-control" id="pwd">
		</div>
		<input type="button" onclick="handleclick(this)" name="type" value="Register as User" class="btn btn-default"></input>
		</form>	
	</div>
<!----------- character selection starts here       -->
<div class="character_selection">
	<h4>Character</h4>
	<form class="character_selection" action="">
	  <input type="radio" id="Ruigi" name="character" value="Ruigi">
	  <label for="Ruigi">Ruigi</label><br>
	  <input type="radio" id="Vario" name="character" value="Vario">
	  <label for="Vario">Vario</label><br>
	  <input type="radio" id="Wowser" name="character" value="Wowser">
	  <label for="Wowser">Wowser</label>
	  <input type="radio" id="Yario" name="character" value="Yario">
	  <label for="Yario">Yario</label><br>
	</form>
  </div>
  
  <!----------- currency selection starts here       -->
  <div class="currency_selection">
	<h4>Currency</h4>
	<form class="crncy_select" action="">
	  <input type="radio" id="CHF" name="crncy" value="CHF">
	  <label for="CHF">CHF</label><br>
	  <input type="radio" id="CNY" name="crncy" value="CNY">
	  <label for="CNY">CNY</label><br>
	  <input type="radio" id="EUR" name="crncy" value="EUR">
	  <label for="EUR">EUR</label>
	  <input type="radio" id="GBP" name="crncy" value="GBP">
	  <label for="GBP">GBP</label><br>
	  <input type="radio" id="JPY" name="crncy" value="JPY">
	  <label for="JPY">JPY</label><br>
	  <input type="radio" id="MXN" name="crncy" value="MXN">
	  <label for="MXN">MXN</label>
	  <input type="radio" id="RUB" name="crncy" value="RUB">
	  <label for="RUB">RUB</label><br>
	  <input type="radio" id="ZAR" name="crncy" value="ZAR">
	  <label for="ZAR">ZAR</label><br>
	</form>
  </div>
</div>  
</div>
</div>
</div>

</div>
<!--===============================================================================================-->	
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/tilt/tilt.jquery.min.js"></script>
	<script >
		$('.js-tilt').tilt({
			scale: 1.1
		})
	</script>
<!--===============================================================================================-->
	<script src="js/main.js"></script>
</body>
</html>